<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>PDB Viewer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f4f6fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#2563eb;
      --accent-2:#7c3aed;
      --radius:12px;
      --maxw:980px;
    }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); margin:24px; color:#0f172a}
    .wrap{max-width:var(--maxw); margin:0 auto}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px;box-shadow:0 6px 20px rgba(15,23,42,0.08)}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:14px}

    .card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:0 8px 24px rgba(15,23,42,0.06)}
    .controls{display:flex;gap:8px;align-items:center}
    input#pdbid{flex:0 0 220px;padding:10px 12px;border:1px solid #e6e9ef;border-radius:8px;font-size:14px}
    button#fetch{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;border:0;padding:9px 14px;border-radius:8px;cursor:pointer;font-weight:600}
    button#fetch:active{transform:translateY(1px)}
    #error{color:#b91c1c;margin-top:12px;min-height:20px}

    .result{margin-top:16px}
    .meta-grid{display:grid;grid-template-columns:1fr 340px;gap:20px;align-items:start}
    .meta-grid img{width:100%;height:auto;border-radius:8px;border:1px solid #eef2ff}
    .meta-list p{margin:6px 0;color:var(--muted);font-size:14px}
    .meta-list p strong{color:#111827}

    h3{margin-top:18px;margin-bottom:8px}
    #abstract{color:#111827;line-height:1.5}

    /* small responsive tweaks */
    @media (max-width:820px){
      .meta-grid{grid-template-columns:1fr;}
      input#pdbid{flex:1}
    }

    /* subtle spinner (CSS-only) */
    .spinner{width:18px;height:18px;border-radius:50%;border:2px solid rgba(255,255,255,0.35);border-top-color:rgba(255,255,255,0.9);animation:spin 900ms linear infinite;display:inline-block;margin-left:8px;vertical-align:middle}
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">PDB</div>
      <div>
        <h1>PDB Viewer</h1>
        <p class="lead">Quickly fetch PDB metadata and view the structure image.</p>
      </div>
    </header>

    <div class="card">
      <div class="controls">
        <input id="pdbid" type="text" placeholder="Enter PDB id (e.g. 7wyv)" />
        <button id="fetch">Fetch</button>
        <div id="error" aria-live="polite"></div>
      </div>

      <div class="result" id="result" hidden>
        <div class="meta-grid">
          <div class="meta-list">
            <h2 id="title"></h2>
            <p><strong>Classification:</strong> <span id="classification"></span></p>
            <p><strong>Organism:</strong> <span id="organism"></span></p>
            <p><strong>Method:</strong> <span id="method"></span></p>
            <p><strong>Resolution:</strong> <span id="resolution"></span></p>
            <p><strong>Publication:</strong> <span id="publication_title"></span></p>
            <p><strong>DOI:</strong> <a id="doi" href="#" target="_blank" rel="noopener noreferrer"></a></p>
            <p><strong>Authors:</strong> <span id="authors"></span></p>
            <p><strong>Related structures:</strong> <span id="related"></span></p>
          </div>
          <div>
            <img id="structureImage" alt="Structure image" />
          </div>
        </div>

        <h3>Abstract</h3>
        <div id="abstract"></div>

        <h3>Raw JSON</h3>
        <pre id="raw" style="background:#f6f8ff;padding:12px;border-radius:8px;overflow:auto;white-space:pre-wrap;"></pre>
      </div>
    </div>

    <p style="margin-top:14px;color:var(--muted);font-size:13px">Tip: use a 4-character PDB id like <code>7wyv</code>. Images are loaded from the RCSB CDN.</p>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>